<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>COBIR | Oracle Payroll Run Book</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #002e5d;     /* City Blue */
            --secondary: #0056b3;   /* Action Blue */
            --accent: #d4af37;      /* Gold/Warning */
            --sidebar-bg: #ffffff;
            --main-bg: #f4f7f9;
            --text: #333;
            --border: #e1e4e8;
        }

        html { scroll-behavior: smooth; }
        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; display: flex; background-color: var(--main-bg); color: var(--text); }

        /* --- SIDEBAR --- */
        .sidebar { width: 340px; height: 100vh; background: var(--sidebar-bg); border-right: 1px solid var(--border); position: fixed; overflow-y: auto; padding: 25px; box-sizing: border-box; z-index: 1000; }
        .sidebar h2 { color: var(--primary); font-size: 1.1rem; text-transform: uppercase; letter-spacing: 1px; border-bottom: 2px solid var(--main-bg); padding-bottom: 10px; margin-top: 25px; }
        .nav-links { list-style: none; padding: 0; }
        .nav-links li { margin: 8px 0; }
        .nav-links a { text-decoration: none; color: var(--secondary); font-weight: 600; display: flex; align-items: center; gap: 10px; padding: 10px; border-radius: 6px; transition: 0.2s; font-size: 0.9rem; }
        .nav-links a:hover { background: #eef6ff; }

        .dictionary-item { margin-bottom: 18px; font-size: 0.85rem; border-bottom: 1px solid #f0f0f0; padding-bottom: 10px; }
        .term { font-weight: bold; color: var(--primary); display: block; margin-bottom: 4px; }
        .definition { color: #666; line-height: 1.5; }

        /* --- MAIN CONTENT --- */
        .main-content { margin-left: 340px; flex-grow: 1; padding: 40px; max-width: 1200px; }
        header { background: linear-gradient(135deg, var(--primary) 0%, #001a35 100%); color: white; padding: 40px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 8px 16px rgba(0,0,0,0.1); text-align: center; }
        .header-logo { max-width: 200px; margin-bottom: 20px; filter: brightness(0) invert(1); }
        header h1 { margin: 0; font-size: 2rem; }

        /* --- OVERVIEW --- */
        .process-overview { background: white; padding: 30px; border-radius: 12px; margin-bottom: 30px; box-shadow: 0 4px 12px rgba(0,0,0,0.08); border-top: 5px solid var(--accent); }
        .overview-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 20px; margin-top: 20px; }
        .overview-card { background: #f8f9fa; padding: 20px; border-radius: 8px; border: 1px solid #eee; }
        .overview-card i { color: var(--secondary); font-size: 1.5rem; margin-bottom: 10px; display: block; }
        .overview-card h4 { margin: 0 0 10px 0; color: var(--primary); }

        /* --- VISUAL FLOW --- */
        .flow-container { display: flex; justify-content: space-between; background: white; padding: 35px 20px; border-radius: 12px; margin-bottom: 40px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); position: relative; }
        .flow-container::after { content: ''; position: absolute; top: 65px; left: 10%; right: 10%; height: 3px; background: #e0e0e0; z-index: 1; }
        .flow-node { position: relative; z-index: 2; text-align: center; width: 23%; text-decoration: none; color: inherit; transition: 0.3s; }
        .node-icon { width: 60px; height: 60px; background: white; border: 3px solid var(--secondary); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 12px; color: var(--secondary); font-size: 1.4rem; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .flow-node:hover .node-icon { background: var(--secondary); color: white; transform: scale(1.1); }

        /* --- CONTROLS --- */
        .controls { display: flex; justify-content: flex-end; gap: 10px; margin-bottom: 15px; }
        .btn { padding: 10px 18px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; font-size: 0.85rem; transition: 0.2s; }
        .btn-expand { background: var(--secondary); color: white; }
        .btn-collapse { background: #e0e0e0; color: #444; }

        /* --- CARDS & STEPS --- */
        .phase-card { background: white; border-radius: 12px; margin-bottom: 25px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); border-left: 8px solid var(--secondary); overflow: hidden; scroll-margin-top: 20px; }
        .phase-header { padding: 25px; cursor: pointer; display: flex; justify-content: space-between; align-items: center; background: #fff; }
        .phase-header h3 { margin: 0; color: var(--primary); font-size: 1.3rem; display: flex; align-items: center; gap: 15px; }
        .phase-body { display: none; border-top: 1px solid var(--border); }

        .group-header { background: #f8f9fa; padding: 12px 25px; font-weight: bold; color: #666; font-size: 0.85rem; border-bottom: 1px solid var(--border); }
        .step-item { border-bottom: 1px solid #f9f9f9; }
        .step-summary { padding: 15px 25px; display: flex; align-items: center; cursor: pointer; transition: 0.2s; }
        .step-summary:hover { background: #fcfcfc; }
        .step-id { width: 60px; font-weight: bold; color: #aaa; font-family: 'Courier New', monospace; font-size: 0.9rem; }
        .step-name { flex-grow: 1; font-weight: 600; color: #444; }

        .badge { font-size: 0.7rem; padding: 4px 12px; border-radius: 20px; color: white; text-transform: uppercase; font-weight: bold; margin-left: 10px; }
        .bg-flow { background: #28a745; }
        .bg-manual { background: #dc3545; }
        .bg-report { background: #fd7e14; }
        .bg-sched { background: #6f42c1; }
        .bg-integ { background: #17a2b8; }

        .step-details { display: none; padding: 25px 25px 25px 85px; background: #fafafa; border-top: 1px dashed #ddd; }
        .detail-row { margin-bottom: 12px; display: flex; }
        .detail-label { width: 140px; font-weight: bold; color: var(--primary); font-size: 0.9rem; flex-shrink: 0; }
        .detail-text { color: #555; font-size: 0.9rem; line-height: 1.5; }
        .nav-path { background: #eef2f7; padding: 4px 8px; border-radius: 4px; color: #d63384; font-family: monospace; font-weight: bold; }
/* Custom Link Style for Header */
        .header-link {
            font-size: 0.8rem;
            color: var(--secondary);
            text-decoration: underline;
            margin-left: 15px;
            font-weight: normal;
            cursor: pointer;
        }
        .header-link:hover { color: var(--accent); }

        .group-header { background: #f8f9fa; padding: 12px 25px; font-weight: bold; color: #666; font-size: 0.85rem; border-bottom: 1px solid var(--border); }
        .step-item { border-bottom: 1px solid #f9f9f9; }
        .step-summary { padding: 15px 25px; display: flex; align-items: center; cursor: pointer; transition: 0.2s; }
        .step-summary:hover { background: #fcfcfc; }
        .step-id { width: 60px; font-weight: bold; color: #aaa; font-family: 'Courier New', monospace; font-size: 0.9rem; }
        .step-name { flex-grow: 1; font-weight: 600; color: #444; }

        .badge { font-size: 0.7rem; padding: 4px 12px; border-radius: 20px; color: white; text-transform: uppercase; font-weight: bold; margin-left: 10px; }
        .bg-flow { background: #28a745; }
        .bg-manual { background: #dc3545; }
        .bg-report { background: #fd7e14; }
        .bg-sched { background: #6f42c1; }
        .bg-integ { background: #17a2b8; }

        .step-details { display: none; padding: 25px 25px 25px 85px; background: #fafafa; border-top: 1px dashed #ddd; }
        .detail-row { margin-bottom: 12px; display: flex; }
        .detail-label { width: 140px; font-weight: bold; color: var(--primary); font-size: 0.9rem; flex-shrink: 0; }
        .detail-text { color: #555; font-size: 0.9rem; line-height: 1.5; }
        .nav-path { background: #eef2f7; padding: 4px 8px; border-radius: 4px; color: #d63384; font-family: monospace; font-weight: bold; }
    </style>
</head>
<body>

    <div class="sidebar">
        <h2 style="margin-top: 0;"><i class="fa-solid fa-compass"></i> Navigation</h2>
        <ul class="nav-links">
            <li><a href="#phase-a"><i class="fa-solid fa-file-signature"></i> A. Pre-Processing</a></li>
            <li><a href="#phase-b"><i class="fa-solid fa-clock-rotate-left"></i> B. Retroactive</a></li>
            <li><a href="#phase-c"><i class="fa-solid fa-calculator"></i> C. Main Processing</a></li>
            <li><a href="#phase-d"><i class="fa-solid fa-money-check-dollar"></i> D. Post-Processing</a></li>
        </ul>

        <h2><i class="fa-solid fa-book-bookmark"></i> Data Dictionary</h2>
        <div class="dictionary-item">
            <span class="term">Payroll Flow</span>
            <span class="definition">The automated mechanism used to run, monitor, and chain tasks together.</span>
        </div>
		 
		 <div class="dictionary-item">
            <span class="term">Flow Pattern</span>
            <span class="definition">The blueprint or template for a payroll run, defining which reports and processes happen in what order.</span>
        </div>

        <div class="dictionary-item">
            <span class="term">Elements</span>
            <span class="definition">The building blocks of pay (Earnings, Deductions, Taxes). Everything on a payslip is an Element.</span>
        </div>
        <div class="dictionary-item">
            <span class="term">SLA</span>
            <span class="definition">Subledger Accounting: The system that creates journal entries for payroll costs.</span>
        </div>
        <div class="dictionary-item">
            <span class="term">Consolidation Group</span>
            <span class="definition">Used to group multiple payroll runs for reporting and GL accounting.</span>
        </div>
		 <div class="dictionary-item">
            <span class="term">Balance adjustment</span>
            <span class="definition">A manual fix applied to an employee's cumulative totals (YTD) to correct tax or pay history.</span>
        </div>

        <div class="dictionary-item">
            <span class="term">Calculation Card</span>
            <span class="definition">Where employee-specific data like Tax Withholdings, Garnishments, and Benefits are stored.</span>
        </div>

        <div class="dictionary-item">
            <span class="term">RetroPay</span>
            <span class="definition">The process that automatically calculates back-pay when changes (like a raise) are dated in the past.</span>
        </div>
        <div class="dictionary-item">
            <span class="term">LDG</span>
            <span class="definition"> Legislative Data Groups (LDGs) are critical structural components used to partition payroll and related data by country, mandatory for ensuring payroll compliance and, at minimum, one per country where an enterprise operates. LDGs associate with Payroll Statutory Units (PSUs) to manage tax, currency, and reporting, acting as a foundation for payroll, benefits, and HR operations. </span>
        </div>
       <div class="dictionary-item">
            <span class="term">PSU</span>
            <span class="definition"> Payroll Statutory Unit (PSU) is a legal entity registered to pay employees and report taxes, acting as the highest level of the payroll employment model. PSUs are essential for grouping legal employers for statutory reporting, controlling tax calculations, and defining pension/contribution limits. </span>
        </div>
       
		<div class="dictionary-item">
            <span class="term">Effective Date</span>
            <span class="definition">The date on which a transaction affects the system (may differ from current date).</span>
        </div>
        <div class="dictionary-item">
            <span class="term">Process Date</span>
            <span class="definition">The date used for payroll calculation logic (often the Check Date).</span>
        </div>
    </div>

    <div class="main-content">
        <header>
            <img src="COB_white_seal.png" alt="City of Birmingham" class="header-logo">
            <h1>Oracle Fusion Payroll Run Book</h1>
            <p>Official On-Cycle Processing Workflow</p>
        </header>

        <section class="process-overview">
            <h2><i class="fa-solid fa-circle-info"></i> Process Overview</h2>
            <p>This guide ensures the Cityâ€™s payroll is calculated accurately and posted to the General Ledger with full audit trails.</p>
            <div class="overview-grid">
                <div class="overview-card">
                    <i class="fa-solid fa-database"></i>
                    <h4>1. Pre-Processing</h4>
                    <p>Load time entries, HR events, and manual adjustments.</p>
                </div>
                <div class="overview-card">
                    <i class="fa-solid fa-rotate-right"></i>
                    <h4>2. Retroactive</h4>
                    <p>Process backdated pay raises or missed time.</p>
                </div>
                <div class="overview-card">
                    <i class="fa-solid fa-microchip"></i>
                    <h4>3. Calculation</h4>
                    <p>Gross-to-Net engine and financial costing.</p>
                </div>
                <div class="overview-card">
                    <i class="fa-solid fa-file-invoice-dollar"></i>
                    <h4>4. Post-Processing</h4>
                    <p>EFT payments, payslips, and GL accounting.</p>
                </div>
            </div>
        </section>

        <div class="flow-container">
            <a href="#phase-a" class="flow-node" onclick="expandPhase('phase-a')">
                <div class="node-icon"><i class="fa-solid fa-inbox"></i></div>
                <span class="node-label">Inputs</span>
            </a>
            <a href="#phase-b" class="flow-node" onclick="expandPhase('phase-b')">
                <div class="node-icon"><i class="fa-solid fa-backward"></i></div>
                <span class="node-label">Retro</span>
            </a>
            <a href="#phase-c" class="flow-node" onclick="expandPhase('phase-c')">
                <div class="node-icon"><i class="fa-solid fa-gears"></i></div>
                <span class="node-label">Calculation</span>
            </a>
            <a href="#phase-d" class="flow-node" onclick="expandPhase('phase-d')">
                <div class="node-icon"><i class="fa-solid fa-receipt"></i></div>
                <span class="node-label">Post-Run</span>
            </a>
        </div>

        <div class="controls">
            <button class="btn btn-expand" onclick="expandAll()"><i class="fa-solid fa-plus"></i> Expand All Steps</button>
            <button class="btn btn-collapse" onclick="collapseAll()"><i class="fa-solid fa-minus"></i> Collapse All</button>
        </div>

        <div class="phase-card" id="phase-a">
            <div class="phase-header" onclick="togglePhase('phase-a')">
                <h3><i class="fa-solid fa-file-import"></i> A. Pre-Processing & Data Validation
				<a href="https://ibasqy-dev2.fa.ocs.oraclecloud.com/fscmUI/faces/FuseWelcome?stStart=i9f8v8l0" class="header-link" target = "_blank">Process-DynamiX Guide</a>
				</h3>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="phase-body">
                <div class="group-header">A1. PAYROLL INPUT ACTIVITIES</div>
                
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.1.1</span>
                        <span class="step-name">Load Payroll Adjustments</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details">
                        <div class="detail-row"><span class="detail-label">Navigation:</span> <span class="nav-path">Payroll > Adjust Individual Balances</span></div>
                        <div class="detail-row"><span class="detail-label">Description:</span> Balance adjustments required prior to run (Benefits arrears, payments outside system).</div>
                        <div class="detail-row"><span class="detail-label">Notes:</span> Effective date < current processing date. Use "results" ending element.</div>
                    </div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.1.2</span>
                        <span class="step-name">Confirm All HR Transactions</span>
                        <span class="badge bg-manual">Manual</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Confirm all HR transactions (New hires, Terms, LOA) are complete.</div></div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.1.3</span>
                        <span class="step-name">Complete Manual Entries (Retros/IWP)</span>
                        <span class="badge bg-manual">Manual / HSDL</span>
                    </div>
                    <div class="step-details">
                        <div class="detail-row"><span class="detail-label">Navigation:</span> <span class="nav-path">Payroll > Element Entries</span></div>
                        <div class="detail-row"><span class="detail-label">Notes:</span> Manual entries or HSDL for volume. Non-recurring: Start Date = PPE. Recurring: Check proration.</div>
                    </div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.1.4</span>
                        <span class="step-name">Review HR New Hires & Pension Plans</span>
                        <span class="badge bg-manual">Manual Entry</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Review New Hires and add pension plans where applicable.</div></div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.1.5</span>
                        <span class="step-name">Kronos Inbound File</span>
                        <span class="badge bg-integ">Integration</span>
                    </div>
                    <div class="step-details">
                        <div class="detail-row"><span class="detail-label">Action:</span> Drop file to SFTP; kick off run in Bridges.</div>
                        <div class="detail-row"><span class="detail-label">Description:</span> Loads time entry/absence data. Review failures in email report.</div>
                    </div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.1.6</span>
                        <span class="step-name">Import Pension Loan Interest</span>
                        <span class="badge bg-integ">Integration</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Current: Manual drop to SFTP. Future: Automatic kick off.</div></div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.1.7</span>
                        <span class="step-name">Import Pension Loan Principal (Feb-Dec)</span>
                        <span class="badge bg-integ">Integration</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Current: Manual drop to SFTP. Future: Automatic kick off.</div></div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.1.8</span>
                        <span class="step-name">Correct Fallouts from Integration</span>
                        <span class="badge bg-manual">Correction</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Review logs and correct any data rejected during integration loads.</div></div>
                </div>

                <div class="group-header">A2. VALIDATION ACTIVITIES</div>
                
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.2.1</span>
                        <span class="step-name">Run Validation Report (US)</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details">
                        <div class="detail-row"><span class="detail-label">Purpose:</span> Identifies missing HR data impacting payroll. Use current date.</div>
                    </div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.2.2</span>
                        <span class="step-name">Run Tax Withholding Card Audit</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Validates if any active employees are missing tax cards.</div></div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.2.3</span>
                        <span class="step-name">Element Entry Report</span>
                        <span class="badge bg-report">Custom Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Analytics report to review element entries.</div></div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.2.4</span>
                        <span class="step-name">Correct Identified Data Issues</span>
                        <span class="badge bg-manual">Correction</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Fix errors found in reports A.2.1 - A.2.3.</div></div>
                </div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">A.2.5</span>
                        <span class="step-name">Repeat Validation</span>
                        <span class="badge bg-manual">Validation</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Rerun reports to ensure clean data before phase B.</div></div>
                </div>
            </div>
        </div>

        <div class="phase-card" id="phase-b">
            <div class="phase-header" onclick="togglePhase('phase-b')">
                <h3><i class="fa-solid fa-clock-rotate-left"></i> B. Retroactive Processing
				<a href="https://ibasqy-dev2.fa.ocs.oraclecloud.com/fscmUI/faces/FuseWelcome?stStart=i9f8v8l0" class="header-link" target = "_blank">Process-DynamiX Guide</a>
				</h3>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="phase-body">
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">B.1.1</span>
                        <span class="step-name">Retro Notification Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Identify pending retroactive changes (salary, grade steps).</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">B.1.2</span>
                        <span class="step-name">Recalculate Payroll for Retroactive</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Execute the RetroPay engine.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">B.1.3</span>
                        <span class="step-name">Run Payroll Messages Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Check for errors during the retro run.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">B.1.4</span>
                        <span class="step-name">Run Retroactive Entries Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Validate the element entries created by RetroPay.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">B.1.5</span>
                        <span class="step-name">Validate & Correct Retro Entries</span>
                        <span class="badge bg-manual">Validation</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Correct any data issues identified in reports.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">B.1.6</span>
                        <span class="step-name">Recalculate Corrections</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details">
                        <div class="detail-row"><span class="detail-label">Small #:</span> Mark for Retry.</div>
                        <div class="detail-row"><span class="detail-label">Large #:</span> Rollback and Resubmit.</div>
                    </div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">B.1.7</span>
                        <span class="step-name">Repeat until Valid</span>
                        <span class="badge bg-manual">Loop</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Repeat steps B.1.3 - B.1.4 until data is clean.</div></div>
                </div>
            </div>
        </div>

        <div class="phase-card" id="phase-c">
            <div class="phase-header" onclick="togglePhase('phase-c')">
                <h3><i class="fa-solid fa-microchip"></i> C. Payroll Processing
				<a href="https://ibasqy-dev2.fa.ocs.oraclecloud.com/fscmUI/faces/FuseWelcome?stStart=i9f8v8l0" class="header-link" target = "_blank">Process-DynamiX Guide</a>
				</h3>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="phase-body">
                <div class="group-header">C1. CALCULATE PAYROLL</div>
                
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.1.1</span>
                        <span class="step-name">Calculate Payroll</span>
                        <span class="badge bg-flow">Core Flow</span>
                    </div>
                    <div class="step-details">
                        <div class="detail-row"><span class="detail-label">Navigation:</span> <span class="nav-path">Payroll > Submit a Flow > Calculate Payroll</span></div>
                    </div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.1.2</span>
                        <span class="step-name">Run Payroll Messages Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Review warnings and errors from calculation.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.1.3</span>
                        <span class="step-name">Data Validation & Correction</span>
                        <span class="badge bg-manual">Validation</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Review warnings to identify if action required.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.1.4</span>
                        <span class="step-name">Run Unprocessed Element Entry Report</span>
                        <span class="badge bg-report">Custom Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Finds elements that did not process. Navigation: Analytics > Custom > HCM > Payroll.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.1.5</span>
                        <span class="step-name">Run Periodic Payroll Activity Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.1.6</span>
                        <span class="step-name">Validate Payroll Calcs vs Entries</span>
                        <span class="badge bg-manual">Validation</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Evaluate calculations; correct missing or incorrect entries.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.1.7</span>
                        <span class="step-name">Recalculate Corrections</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details">
                        <div class="detail-row"><span class="detail-label">Small #:</span> Mark for Retry.</div>
                        <div class="detail-row"><span class="detail-label">Large #:</span> Rollback and Resubmit.</div>
                    </div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.1.8</span>
                        <span class="step-name">Repeat Validation Loop</span>
                        <span class="badge bg-manual">Loop</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Repeat steps until data is valid.</div></div>
                </div>

                <div class="group-header">C2. PREVIEW ACCOUNTING</div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.2.1</span>
                        <span class="step-name">Transfer to Subledger Accounting</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Check Date.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.2.2</span>
                        <span class="step-name">Run Payroll Costing Results</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.2.3</span>
                        <span class="step-name">Create Accounting (DRAFT)</span>
                        <span class="badge bg-sched">Process</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use PP End Date.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.2.4</span>
                        <span class="step-name">Validate Costing vs Activity</span>
                        <span class="badge bg-manual">Validation</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Payroll Costing Results vs Payroll Activity Report. Correct issues.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.2.5</span>
                        <span class="step-name">Review Draft Execution Report</span>
                        <span class="badge bg-manual">Validation</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Review and correct any invalid journal entries.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.2.6</span>
                        <span class="step-name">Recalculate Corrections</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Rollback Transfer to SLA > Rollback Payroll > Recalculate.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.2.7</span>
                        <span class="step-name">Repeat Loop</span>
                        <span class="badge bg-manual">Loop</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Repeat full process until valid.</div></div>
                </div>

                <div class="group-header">C3. REPORTING & VALIDATION</div>
                
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.3.1</span>
                        <span class="step-name">Run Gross-to-Net Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.3.2</span>
                        <span class="step-name">Run Element Results Register</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.3.3</span>
                        <span class="step-name">Run Deduction Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.3.4</span>
                        <span class="step-name">Run Involuntary Deduction Audit Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">C.3.5</span>
                        <span class="step-name">Run Statutory Deduction Register</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
            </div>
        </div>

        <div class="phase-card" id="phase-d">
            <div class="phase-header" onclick="togglePhase('phase-d')">
                <h3><i class="fa-solid fa-vault"></i> D. Post-Payroll Processing
				<a href="https://ibasqy-dev2.fa.ocs.oraclecloud.com/fscmUI/faces/FuseWelcome?stStart=i9f8v8l0" class="header-link" target = "_blank">Process-DynamiX Guide</a>
				</h3>
                <i class="fa-solid fa-chevron-down"></i>
            </div>
            <div class="phase-body">
                <div class="group-header">D1. PAYMENTS - EMPLOYEE/RETIREE</div>
                
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.1.1</span>
                        <span class="step-name">Calculate PrePayments</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.1.2</span>
                        <span class="step-name">Archive Periodic Payroll Results</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.1.3</span>
                        <span class="step-name">Run Payment Register Report (Unpaid)</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Shows expected payments.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.1.4</span>
                        <span class="step-name">Make EFT Payments - Employee ACH</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Generates bank file.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.1.5</span>
                        <span class="step-name">Generate Check Payments</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Payee Type: Employee/Retiree.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.1.6</span>
                        <span class="step-name">Run Payment Register Report (Paid)</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Shows status change of paid payments.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.1.7</span>
                        <span class="step-name">Validate Payment Register v. Gross to Net</span>
                        <span class="badge bg-manual">Validation</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Ensure totals match.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.1.8</span>
                        <span class="step-name">Print Checks</span>
                        <span class="badge bg-manual">Action</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.1.9</span>
                        <span class="step-name">Generate Payslips</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>

                <div class="group-header">D2. PAYMENTS - THIRD PARTIES</div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.2.1</span>
                        <span class="step-name">Make EFT Payments - Third Party ACH</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.2.2</span>
                        <span class="step-name">Run Third-Party Payment Rollup</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use Process Date / Date Paid.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.2.3</span>
                        <span class="step-name">Generate Check Payments (Third Party)</span>
                        <span class="badge bg-flow">Flow</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Payee Type: Third Party.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.2.4</span>
                        <span class="step-name">Run Third-Party Periodic Tax Filing Extract</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Fetches total periodic tax liability.</div></div>
                </div>

                <div class="group-header">D3. ACCOUNTING, AP & PAYMENTS</div>

                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.1</span>
                        <span class="step-name">Create Accounting (Final)</span>
                        <span class="badge bg-sched">Process</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Use PPE Date.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.2</span>
                        <span class="step-name">Payroll to AP for Benefits</span>
                        <span class="badge bg-manual">Action</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Process transfer to AP.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.3</span>
                        <span class="step-name">Credit Union Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Review data.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.4</span>
                        <span class="step-name">AXA Equitable 457 Deductions Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Review data.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.5</span>
                        <span class="step-name">DC Nationwide Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Review data.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.6</span>
                        <span class="step-name">AXA Loan Report</span>
                        <span class="badge bg-report">Report</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Review data.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.7</span>
                        <span class="step-name">Process Tax Payment through AP</span>
                        <span class="badge bg-manual">Manual</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Manual coordination with AP. Not a payroll process.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.8</span>
                        <span class="step-name">Process Credit Union Payment through AP</span>
                        <span class="badge bg-manual">Manual</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Manual coordination with AP. Not a payroll process.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.9</span>
                        <span class="step-name">Process Pension Loan/Interest Payment AP</span>
                        <span class="badge bg-manual">Manual</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Duplicate entry? Manual check.</div></div>
                </div>
                <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.10</span>
                        <span class="step-name">Active Pension Loan Deduction</span>
                        <span class="badge bg-integ">Outbound</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Outbound Integration - Not related to AP/GL.</div></div>
                </div>
                 <div class="step-item">
                    <div class="step-summary" onclick="toggleStep(this)">
                        <span class="step-id">D.3.11</span>
                        <span class="step-name">PBJC Certification File</span>
                        <span class="badge bg-report">Custom</span>
                    </div>
                    <div class="step-details"><div class="detail-row">Custom Report / HR / Krupali.</div></div>
                </div>
            </div>
        </div>

    </div>

    <script>
        function togglePhase(id) {
            const card = document.getElementById(id);
            const body = card.querySelector('.phase-body');
            const icon = card.querySelector('.phase-header i.fa-chevron-down');
            const isOpen = body.style.display === "block";
            body.style.display = isOpen ? "none" : "block";
            icon.style.transform = isOpen ? "rotate(0deg)" : "rotate(180deg)";
        }

        function expandPhase(id) {
            const card = document.getElementById(id);
            const body = card.querySelector('.phase-body');
            const icon = card.querySelector('.phase-header i.fa-chevron-down');
            body.style.display = "block";
            icon.style.transform = "rotate(180deg)";
        }

        function toggleStep(el) {
            const details = el.nextElementSibling;
            const isOpen = details.style.display === "block";
            details.style.display = isOpen ? "none" : "block";
            el.style.background = isOpen ? "white" : "#f0f7ff";
        }

        function expandAll() {
            document.querySelectorAll('.phase-body').forEach(b => b.style.display = 'block');
            document.querySelectorAll('.step-details').forEach(d => d.style.display = 'block');
            document.querySelectorAll('.phase-header i.fa-chevron-down').forEach(i => i.style.transform = "rotate(180deg)");
            document.querySelectorAll('.step-summary').forEach(s => s.style.background = "#f0f7ff");
        }

        function collapseAll() {
            document.querySelectorAll('.phase-body').forEach(b => b.style.display = 'none');
            document.querySelectorAll('.step-details').forEach(d => d.style.display = 'none');
            document.querySelectorAll('.phase-header i.fa-chevron-down').forEach(i => i.style.transform = "rotate(0deg)");
            document.querySelectorAll('.step-summary').forEach(s => s.style.background = "white");
        }
    </script>
</body>

</html>

